---
import "../styles/index.sass";
import "../styles/nav.sass";
import "../styles/card.sass";
import "../styles/scrollbar.sass";
import Footer from "../components/Footer.astro";

export interface Props {
    title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <title>{title}</title>
    </head>
    <body>
        <div class="page-wrapper">
            <nav class="nav card-wrapper">
                <a
                    class="nav__item card-wrapper__card"
                    href="/"
                    data-hash="home"
                >
                    <span class="card-wrapper__card__content">Home</span>
                </a>
                <a
                    class="nav__item card-wrapper__card"
                    href="/portfolio"
                    data-hash="portfolio"
                >
                    <span class="card-wrapper__card__content">Portfolio</span>
                </a>
                <a
                    class="nav__item card-wrapper__card"
                    href="/contact"
                    data-hash="contact"
                >
                    <span class="card-wrapper__card__content">Contact</span>
                </a>
                <a class="nav__item card-wrapper__card" href="/live">
                    <span class="card-wrapper__card__content">Livestream</span>
                </a>
            </nav>
            <main class="page-wrapper__content">
                <slot />
            </main>
            <Footer />
        </div>

        <script defer>
            const mql = window.matchMedia("(hover: hover) and (pointer: fine)");
            if (mql.matches) {
                const cardsEls = Array.from(
                    document.getElementsByClassName("card-wrapper__card")
                );

                window.addEventListener(
                    "mousemove",
                    (ev) => {
                        for (const cardEl of cardsEls) {
                            const rect = cardEl.getBoundingClientRect();

                            const x = ev.clientX - rect.left;
                            const y = ev.clientY - rect.top;

                            cardEl.style.setProperty("--x-pos", `${x}px`);
                            cardEl.style.setProperty("--y-pos", `${y}px`);
                        }
                    },
                    {
                        passive: true,
                    }
                );
            }
        </script>
    </body>
</html>
